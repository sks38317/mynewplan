# 기후 기반 사회붕괴 예측 시뮬레이션: 단계별 구체 실행 계획서

본 문서는 연평균 기온 변화, 이상기후·자연재해 빈도, 사회 혼란·붕괴 확률을 연결하여 예측하는 시뮬레이션의 전체 설계 로드맵입니다. 각 단계마다 **목표**, **필요 데이터**, **사용 도구/기법**, **구현 방식**을 구체적으로 정리합니다.

---

## 1. 기후대별 도시/주/국가 분류 및 실측 자료 수집

### 목표
- 31개 기후대(Köppen-Geiger)에 포함되는 도시·주·국가를 분류
- 2005–2024년 동안의 연평균 기온 및 기후 변수 실측 자료를 수집

### 달성 방법
- **GeoTIFF 1km 해상도 Köppen-Geiger 지도**를 불러와 각 좌표에 기후대 코드를 부여
- **GeoNames의 도시좌표 목록**을 활용해 각 도시를 기후대에 매핑
- ERA5-Land에서 **월평균 2m 기온** 자료(2005–2024)를 다운로드 후 연평균으로 계산
  - **육지 마스크(land-sea mask)**를 적용해 해양 픽셀 제외
- 온실가스(CO₂, CH₄), 태양복사량(TSI), SAOD(화산 에어로졸), ENSO(ONI), PM2.5 등 외생 변수 수집
  - 모두 연평균 시계열로 통일
- 결과:
  - `cities_by_zone.json`: 기후대별 주요 도시 목록
  - `annual_temp_zone.csv`: 31개 기후대 × 20년 연평균 기온
  - `features_global.csv`: 연도별 외생 변수표

---

## 2. 연평균 기온 예측을 위한 비선형 항목 구성 및 변수 선택

### 목표
- 기온 상승이 단순 직선이 아니라 점점 가속되거나 계절성·상호작용이 포함된 복잡한 방식임을 반영
- 기후대별로 중요한 영향을 주는 항목을 선별하여 수식 구성

### 달성 방법
- CO₂, CH₄, ENSO 등 외생 변수로부터 파생 항목 생성:
  - ΔCO₂, (ΔCO₂)², ENSO³, ΔCO₂×ENSO, SAOD², 로그(PM₂.₅) 등
- 계절성을 반영하기 위해 **Fourier 항(1년 주기, 반년 주기)**을 SIN/COS 형태로 삽입
- **PolynomialFeatures + LassoCV** 모델을 기후대별로 학습시켜:
  - 기여도 낮은 항목은 제거하고
  - 수식에 포함할 비선형 항만 자동 선택
- 결과:
  - `temp_model_coefs.json`: 기후대별 예측 수식의 항목과 계수
  - `temp_model_metrics.csv`: 수식의 RMSE, MAPE, R² 오차 평가

---

## 3. 수식의 오차 분석 및 재구성

### 목표
- 구성된 수식이 실제 기온 변화와 잘 맞는지 확인
- 오차가 큰 지역에 대해서는 수식 구조나 모델을 개선

### 달성 방법
- 예측값과 실제 연평균 기온 간 RMSE(평균 제곱 오차), MAPE(비율 오차), R² 계산
- 고오차 지역은:
  - 항목 수 늘리기 (Polynomial 차수 ↑)
  - 트리 기반 모델(XGBoost, LightGBM 등)으로 전환 검토
- 잔차 분석:
  - 시계열적 잔차(연도별 편향) 확인
  - 고위도 지역 겨울 계절 편향 보정
- 결과:
  - 수정된 항목으로 다시 `temp_model_coefs.json` 업데이트

---

## 4. 이상기후, 자연재해 발생빈도 예측을 위한 수식화

### 목표
- 기온 변화 및 외생 변수를 입력으로 하여, 폭염·홍수 등 이상기후 및 재해 발생 빈도를 예측

### 달성 방법
- 수식 2~3에서 예측된 연도별 T_zone(t)을 기반으로
- **XGBoost 회귀 모델**을 사용해 재해 건수 예측:
  - 입력: T_pred, ΔCO₂, ENSO, CH₄, SAOD, 회복력지수 등
  - 출력: 극한기후 건수 또는 빈도(확률값)
- 예측값은 정규화(Z-score) 후 RFIM에 입력할 **hᵢ(t)**로 사용
- 결과:
  - `events_sim_zone.csv`: 2025–2045 예상 재해 발생빈도

---

## 5. RFIM을 위한 외부장 hᵢ(t) 구성

### 목표
- 예측된 재해 발생 강도를 RFIM 모델에서 사용할 수 있는 자극 값으로 변환

### 달성 방법
- Z(Event Rate), Z(Damage), Z(회복력 지수), ΔCO₂, T_global 등의 가중 합
- 가중치는 민감도 분석 또는 초기 실험으로 결정 (예: α₁ = 1.0, α₂ = 0.4 등)
- 시계열: 2025년 ~ 2045년 (2년 단위 또는 연 단위)
- 결과:
  - `h_field.npy`: 31개 기후대 × 11년치 외부 자극 벡터

---

## 6. 사회 붕괴 예측 시뮬레이션 (RFIM 기반)

### 목표
- 극한기후가 축적되었을 때 각 지역이 혼란 상태로 전이될 확률을 계산

### 달성 방법
- 노드: 31개 기후대 (또는 세분화 시 주 단위로 확장)
- 상태(스핀): 안정(+1) 또는 붕괴(–1)
- 상호작용 행렬 Jᵢⱼ:
  - 기후 거리 + 무역 + 인구이동 데이터 기반
  - 행렬 스펙트럼 정규화로 붕괴 임계점 제어
- β (베타): 이웃에 영향을 얼마나 받는지 결정하는 민감도 파라미터
- 2045년까지 20년 시뮬레이션 수행
- 결과:
  - `CollapseProb_2045.xlsx`: 기후대별 붕괴 확률

---

## 7. 사회경제·지정학적 지표 연결

### 목표
- 단순 붕괴 확률을 넘어서, 실제 사회 시스템(식량, 경제, 군사, 무역 등)에 미치는 영향까지 해석

### 달성 방법
- 각 노드에 다음 지표 연결:
  - 인구, GDP, 농업생산, 수입 의존도, 정치 안정성, 무력 충돌 기록
- 붕괴된 지역의 합산 위험도를 시나리오로 해석:
  - 식량 위기 위험 지도
  - 무역단절 시나리오
  - 지정학적 갈등 확대 확률
- 결과는 사회 영향 요약 그래프, 지도 등으로 시각화

---

## 8. 검증 및 교차검증을 통한 보정

### 목표
- 과거 데이터를 활용해 예측의 정확성을 검증하고, 모델을 수정

### 달성 방법
- 백테스트: 2005–2019 중 일부 구간은 학습 제외 후 예측 정확도 평가
- 평가 지표:
  - AUC (이진 분류)
  - Brier Score (확률 예측 정확도)
- 파라미터 감도 분석:
  - β, α 조절 시 붕괴 확률 민감도 추적
- 결과:
  - `evaluation_report.md`, `sensitivity_matrix.csv`

---
